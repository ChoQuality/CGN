!function(e){e.dsMultiUpload=function(e,l){if(!document.getElementById(e))return;const t=e;var i=[],n=0,s={fileMaxSize:20,totalMaxSize:100};function o(e){if(e.length<1)return void a();let l=0;for(let t=0;t<e.length;t++)l+=f(e[t].size);if(i.length>0&&(l+=f(i.reduce(((e,l)=>e+l.size),0))),p(l,s.totalMaxSize))return void alert(`최대 파일크기인 ${s.totalMaxSize}MB를 넘었습니다.`);for(let l=0;l<e.length;l++){const t=e[l];if(p(f(t.size),s.fileMaxSize))return void alert(`${t.name} 파일이 최대 ${s.fileMaxSize}MB 크기를 넘었습니다.`)}const o=e,c=document.querySelector(`#${t} .fileUploadMultiple__list`),m=document.querySelector(`#${t} .file__size`);if(o.length>0){d()&&(c.textContent="");for(let e=0;e<o.length;e++){const l=o[e];if(u(l.name))return void alert(`${l.name}이 중복되었습니다!`);c.innerHTML+=_(l),i.push(l)}m.innerHTML=`${Number(n.toFixed(2))}MB / ${s.totalMaxSize} MB`,r(i)}}function c(){document.querySelectorAll(".fileUploadMultiple__delete .btn").forEach((e=>{e.addEventListener("click",(e=>{if(d())return;const l=e.target.closest("li"),o=l.childNodes[3].textContent,c=l.childNodes[5].textContent;i.length>0&&i.forEach(((e,l)=>{e.name===o&&(n-=Number(c.split("MB")[0]),i.splice(l,1))})),l.remove();if(0===document.querySelectorAll(`#${t} .fileUploadMultiple__item`).length){document.querySelector(`#${t} .fileUploadMultiple__list`).innerHTML='\n              <li class="fileUploadMultiple__item is-empty">\n                파일을 마우스로 끌어 오세요\n              </li>\n            ',n=0}r(i);document.querySelector(`#${t} .file__size`).innerHTML=`${Number(n.toFixed(2))}MB / ${s.totalMaxSize} MB`}))}))}function a(){document.querySelector(`#${t} .fileUploadMultiple__list`).innerHTML='\n        <li class="fileUploadMultiple__item is-empty">\n          파일을 끌어 업로드 해주세요.\n        </li>\n      '}function r(e){var l=document.querySelector(`#${t} .file__input`);const i=new DataTransfer;e.forEach((e=>{i.items.add(e)})),l.files=i.files}function d(){const e=document.querySelectorAll(`#${t} .fileUploadMultiple__item`)[0];if(e)return e.classList.contains("is-empty")}function u(e){return!!i.find((l=>l.name===e))}function p(e,l){return e>l}function f(e){let l=e/1048576;return l=Number(l.toFixed(2)),l}function _(e){const l=e.name,t=f(e.size);n+=t;return`\n          <li class="fileUploadMultiple__item">\n          <div class="fileUploadMultiple__itemCheck is-item">\n            <div class="checkGroup">\n              <label class="check__label">\n                <input type="checkbox" class="check__input">\n                <span class="check__style"></span>\n              </label>\n            </div>\n          </div>\n          <div class="is-item is-flex-grow"><label>${l}</label></div>\n          <div class="is-item is-file">${t}MB</div>\n          <div class="is-item is-delete fileUploadMultiple__delete"><button class="btn has-icon"><i class="icon is-24 is-wastebasket-24"></i></button></div>\n        </li>\n      `}return l&&(s.fileMaxSize=l.fileMaxSize?l.fileMaxSize:s.fileMaxSize,s.totalMaxSize=l.totalMaxSize?l.totalMaxSize:s.totalMaxSize),function(){const e=document.getElementById(t);e.childNodes.length>0&&(e.innerHTML="");e.innerHTML=`\n        <div class="fileUploadMultiple__top">\n          <div class="fileUploadMultiple__topLeft">\n            <input type="file" style="display:none" class="file__input" multiple/>\n            <div class="btnGroup gap-5">\n              <button type="button" class="btn is-secondary is-small file__search">파일찾기</button>\n              <button type="button" class="btn is-secondary is-small file__remove">파일삭제</button>\n            </div>\n          </div>\n          <div class="fileUploadMultiple__topRight">\n            <div class="description"><i class="icon is-24 is-system-info"></i>최대 ${s.fileMaxSize}MB 까지 첨부 가능합니다. (xlsx, 텍스트 파일)</div>\n            <span class="file__size">${n} MB / ${s.totalMaxSize} MB</span>\n          </div>\n        </div>\n        <div class="fileUploadMultiple__box">\n          <div class="fileUploadMultiple__header">\n            <div class="is-title has-checkGroup">\n              <div class="checkGroup">\n                <label class="check__label">\n                  <input type="checkbox" class="check__input check__all">\n                  <span class="check__style"></span>\n                </label>\n              </div>\n            </div>\n            <div class="is-title is-flex-grow">파일명</div>\n            <div class="is-title is-file">파일크기</div>\n            <div class="is-title is-delete">파일삭제</div>\n          </div>\n          <div class="fileUploadMultiple__body has-scrollbars is-small">\n            <ul class="fileUploadMultiple__list">\n            </ul>\n          </div>\n        </div>\n      `,OverlayScrollbars(document.querySelector(`#${t} .has-scrollbars`),{scrollbars:{autoHide:"leave",autoHideDelay:700}}),function(){var e=document.querySelector(`#${t} .file__input`);const l=document.querySelector(`#${t} .file__search`),a=document.querySelector(`#${t} .check__all`),u=document.querySelector(`#${t} .file__remove`),p=document.querySelector(`#${t} .fileUploadMultiple__list`);document.querySelector(`#${t} .fileUploadMultiple__delete .btn`);l.addEventListener("click",(l=>{e.click()})),e.addEventListener("change",(()=>{const l=e.files;l&&0!==l.length&&(o(l),c())})),p.addEventListener("drop",(e=>{e.preventDefault();const l=[...e.dataTransfer?.files];l&&0!==l.length&&(o(l),c())})),p.addEventListener("dragover",(e=>{e.preventDefault()})),a.addEventListener("click",(e=>{const l=d(),i=e.target.checked;if(l)return;const n=document.querySelectorAll(`#${t} .fileUploadMultiple__item input[type=checkbox]`);for(let e=0;e<n.length;e++){n[e].checked=i}})),u.addEventListener("click",(e=>{if(d())return;const l=document.querySelectorAll(`#${t} .fileUploadMultiple__item input[type=checkbox]`);for(let e=0;e<l.length;e++){const t=l[e];if(t.checked){const e=t.parentElement.parentElement.parentElement.parentElement,l=e.childNodes[3].textContent,s=e.childNodes[5].textContent;console.log(s),i.length>0&&i.forEach(((e,t)=>{e.name===l&&(n-=Number(s.split("MB")[0]),i.splice(t,1))})),e.remove()}}const o=document.querySelectorAll(`#${t} .fileUploadMultiple__item input[type=checkbox]`);if(!o||0===o.length){document.querySelector(`#${t} .fileUploadMultiple__list`).innerHTML='\n              <li class="fileUploadMultiple__item is-empty">\n                파일을 끌어 업로드 해주세요.\n              </li>\n          ',n=0}r(i),a.checked=!1;document.querySelector(`#${t} .file__size`).innerHTML=`${Number(n.toFixed(2))}MB / ${s.totalMaxSize} MB`}))}()}(),c(),a(),{id:t,getFileList:function(){return document.querySelector(`#${t} .file__input`).files},setFileList:function(e){if("object"!=typeof e||void 0===e.length)return;const l=document.querySelector(`#${t} .fileUploadMultiple__list`);l.children.length>0&&(l.innerHTML=""),i=[];var n=[];for(let l=0;l<e.length;l++)n.push(e[l]);o(n),c()}}}}(window);