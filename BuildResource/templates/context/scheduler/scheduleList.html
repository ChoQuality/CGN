
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>관리자 > 스케줄링</title>
    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/png;base64,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" />
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAABtklEQVR42qWTvUtbURyGn0rhJm2UUmi5tlOFdKtgQTq5uRW6tRo6l+4duougIG6CH1H/AScndwe/gmIgTm4qoomgg4mYiL7m3ovhfhzCkTzP9nLve+/5nXMw0kOORQpUaDStUCDPKN1Y8ZllashgjSWytCXNNHeojQ2mSIGZLCVk4Ra9GBiggiw9oT/59eB1+wqXECmK6JnukqbFNKLlH3UJG8daGxedvLSrQZuCa1x8llFYjzNh4yxAD7VkwbmwsUo35JCxwM4RWLQp+Kbhpo6IuwAFm4J9eXwwnUouOiooQ72jgtuOCwxLuJdUiWVFefQalmAY4pGkB70NJV268LO0cYj5eLgmj3+h5Lc8SiLpPIzGwx/yuFFO+H7XpTz+iqQ/IUM1Gr7QugKKWtGOAg6U0lfNaCh6lDMASyjqe+0pyqE+CZXi+5PHJ0sDRX2l/zpXwJXG9cZPVyVtiCfr9EHAFEr6UgMa1mDoBjga0mvx5CQtUmyhZ7qJQwiXY4S9p3wkRj8nyNJjvmDgHeuWP++CGYcxqqiNdSZwaIvLLOaSKgv0YUWGEebZpky9aZlt5vhFxvToIzYpflkJkjiFAAAAAElFTkSuQmCC" />
    <link rel="icon" type="image/png" sizes="16x16" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAA1ElEQVR42m2QO0oDYRRGj6BRkHQ2aS3NWNm7GAVxF9paJGZIiLoSCx+bmBFdhZCHVUaOwZ8LyfDf01y4h++DCzGnlNQs19SMKNiafab84gYNEzoQ53fM8BbKA2Ivp4z/u1P4rc/SpqEPJSZhmcsYwkdbOPfJgxAqWLSFa7Ubwhzmab3xJyfMiIor9VjEqTN3NipGaT3y29oL71x5bxEZAyhoknLmp7ry0V2/vBRpOAGYYNDzUMRuKikBoMMrZnhhD0IZ07R+WMY5ps+QisWaikHqBvgDlbLejai5KhQAAAAASUVORK5CYII=" />
    <link rel="manifest" href="data:application/manifest+json;base64,ewogICAgIm5hbWUiOiAiIiwKICAgICJzaG9ydF9uYW1lIjogIiIsCiAgICAiaWNvbnMiOiBbCiAgICAgICAgewogICAgICAgICAgICAic3JjIjogIi9hbmRyb2lkLWNocm9tZS0xOTJ4MTkyLnBuZyIsCiAgICAgICAgICAgICJzaXplcyI6ICIxOTJ4MTkyIiwKICAgICAgICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIgogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgICAic3JjIjogIi9hbmRyb2lkLWNocm9tZS01MTJ4NTEyLnBuZyIsCiAgICAgICAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIgogICAgICAgIH0KICAgIF0sCiAgICAidGhlbWVfY29sb3IiOiAiI2ZmZmZmZiIsCiAgICAiYmFja2dyb3VuZF9jb2xvciI6ICIjZmZmZmZmIiwKICAgICJkaXNwbGF5IjogInN0YW5kYWxvbmUiCn0K" />
    <link rel="mask-icon" href="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iNzAwLjAwMDAwMHB0IiBoZWlnaHQ9IjcwMC4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDcwMC4wMDAwMDAgNzAwLjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgo8bWV0YWRhdGE+CkNyZWF0ZWQgYnkgcG90cmFjZSAxLjE0LCB3cml0dGVuIGJ5IFBldGVyIFNlbGluZ2VyIDIwMDEtMjAxNwo8L21ldGFkYXRhPgo8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCw3MDAuMDAwMDAwKSBzY2FsZSgwLjEwMDAwMCwtMC4xMDAwMDApIgpmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiPgo8cGF0aCBkPSJNMzI3OCA2OTk1IGMtMSAtMSAtNDIgLTUgLTg5IC05IC00NyAtNCAtOTUgLTggLTEwNSAtMTAgLTEwIC0yIC00MQotNyAtNjkgLTEwIC0zMzUgLTQ0IC03MTUgLTE1OCAtMTAzMCAtMzEyIC0xODAgLTg3IC00NDggLTI0NyAtNTU1IC0zMzEgLTggLTYKLTUxIC00MCAtOTUgLTc0IC0zNDIgLTI2NiAtNjUwIC02MjMgLTg3NSAtMTAxNCAtNDcgLTgzIC0xNzAgLTMyNyAtMTcwIC0zNDAKMCAtMyAtOSAtMjQgLTIwIC00OCAtNTcgLTEyMyAtMTU3IC00MzUgLTE4NiAtNTgyIC0yIC0xMSAtMTAgLTU0IC0xOSAtOTUgLTI5Ci0xNDcgLTM2IC0yMDAgLTUyIC0zNzAgLTE1IC0xNjUgLTggLTU5MiAxMiAtNzExIDIgLTEzIDYgLTQ2IDkgLTc0IDkgLTc4IDIyCi0xNTIgNTEgLTI4NSAyMSAtOTYgOTEgLTMzOSAxMTQgLTM5NSA1IC0xMSAyNSAtNjUgNDYgLTEyMCA2NCAtMTcwIDIxMyAtNDYxCjMxNCAtNjE1IDIxMyAtMzIzIDQ2OSAtNjAzIDc3MSAtODQ1IDkyIC03NCAzNzAgLTI2NSAzODYgLTI2NSA0IDAgMTUgLTYgMjMKLTE0IDQ3IC00MSA0MTMgLTIxMiA1NzYgLTI3MCA3OSAtMjcgMjYxIC04NCAyOTEgLTkwIDEwIC0yIDU3IC0xMyAxMDQgLTI1CjEwOSAtMjYgMjAwIC00MyAyOTkgLTU3IDI1IC0zIDU3IC04IDcxIC0xMCAxNjIgLTI1IDY4MyAtMjUgODQxIDEgMTMgMiA0NyA3Cjc0IDEwIDcxIDEwIDg3IDEzIDExNSAxOCAxNCAzIDQzIDggNjUgMTIgMTE1IDIxIDMxNCA3NCA0NTUgMTIyIDE4OCA2NCA0NzMKMTkyIDYxNCAyNzggMzIgMTkgNjIgMzUgNjcgMzUgNSAwIDkgNSA5IDEwIDAgNiA1IDEwIDEwIDEwIDE1IDAgMjIwIDE0MSAzMzAKMjI3IDE1MiAxMTggMzI0IDI4MCA0NTAgNDIyIDM2IDQxIDcwIDc5IDc2IDg1IDYgNiA0OCA2MSA5NCAxMjEgMTUwIDE5NyAyNzcKNDA1IDM4MyA2MjggMjYgNTMgNDcgOTkgNDcgMTAyIDAgMiAxMSAyOCAyNCA1NyA1NyAxMjcgMTUxIDQyMSAxODIgNTczIDE3IDgxCjU0IDMwMSA1OSAzNTAgNCAzMyA5IDcxIDExIDg1IDkgNDcgMTEgNTI1IDQgNjA1IC0xNSAxNTcgLTIxIDIxMCAtMjUgMjI1IC0yCjggLTcgMzUgLTEwIDYwIC0xNyAxMjkgLTgwIDM4NCAtMTM2IDU1MiAtMzQ4IDEwMzYgLTExNjggMTg1NyAtMjIwNCAyMjA2Ci0xNjggNTcgLTQyMCAxMTkgLTU1NSAxMzcgLTE5IDMgLTQ2IDcgLTYwIDEwIC0xMyAyIC01MiA3IC04NiAxMSAtMzMgMyAtNzQgOAotOTAgMTAgLTMzIDUgLTU0MCAxNCAtNTQ2IDl6Ii8+CjwvZz4KPC9zdmc+Cg==" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />
    <!-- /favicon -->

    <link rel="stylesheet" href="/assets/css/uid.css" />
    <script defer src="/assets/js/base.js"></script>
    <script defer src="/assets/js/uid.js"></script>

    <!-- /vendors -->
</head>
<body class="before-load">
<noscript>
    이 사이트의 기능을 모두 활용하기 위해서는 자바스크립트를 활성화 시킬 필요가 있습니다.
    <a href="http://www.enable-javascript.com/ko/" target="_blank">브라우저에서 자바스크립트를 활성화하는 방법</a>을 참고 하세요.
</noscript>
<div class="loading">
    <div class="spinner">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>
<div class="wrapper">
    <header class="header">
        <h1 class="header__logo"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ1IiBoZWlnaHQ9IjQxIiB2aWV3Qm94PSIwIDAgMTQ1IDQxIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfMTIzXzkwNDEpIj4KPHBhdGggZD0iTTQuMzcyMDQgMTAuOTE3NUwyLjg3MzY0IDkuMzAxMDNDMS4wNDI3MiAxMi4zNzMyIDAgMTUuOTI3OSAwIDE5LjU0N0gxLjAzMDQxQzEuMDM0NTEgMTYuMTYxMiAyLjIzNzM0IDEzLjA4NSA0LjM3MjA0IDEwLjkxNzVaIiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMTIzXzkwNDEpIi8+CjxwYXRoIGQ9Ik00LjEwNTIxIDI2Ljc5M0MyLjIzMzIzIDI1LjA1NTkgMS4wMzA0MSAyMi43MDM1IDEuMDMwNDEgMTkuNTYzVjE5LjU0NjlIMEMwIDIzLjIyNjMgMC42NjkxNDkgMjYuNjQ0MyAxLjk5NTEzIDI5LjYyOEw0LjEwNTIxIDI2Ljc5M1oiIGZpbGw9InVybCgjcGFpbnQxX2xpbmVhcl8xMjNfOTA0MSkiLz4KPHBhdGggZD0iTTM2LjkzMDMgMTYuOTM3M0wzNS4wMTMyIDE4Ljg3NTVDMzcuNjY1MSAxOC45MTE3IDM5LjI5NDkgMjAuOTE4MiAzOS4yNDE1IDIzLjQ3OTdINDAuMjcyQzQwLjI3MiAyMC45NTQ0IDM5LjA2MDkgMTguNjU4MyAzNi45MzAzIDE2LjkzNzNaIiBmaWxsPSJ1cmwoI3BhaW50Ml9saW5lYXJfMTIzXzkwNDEpIi8+CjxwYXRoIGQ9Ik00MC4yNzIxIDIzLjQ3OTdIMzkuMjQxN0MzOS4xOTI0IDI1LjU4NjggMzguMDQzIDI3LjM1MjEgMzUuNDkzNyAyOC42NjcxTDM4LjE4MjYgMzIuMjk4MkMzOS40OTYyIDI5LjkyMTcgNDAuMjcyMSAyNy4wMTAzIDQwLjI3MjEgMjMuNDc5N1oiIGZpbGw9InVybCgjcGFpbnQzX2xpbmVhcl8xMjNfOTA0MSkiLz4KPHBhdGggZD0iTTUuNDQ3NzEgMTYuNTk5NEM1LjM3MzgyIDE2Ljk4NTUgNS4zMzI3NiAxNy4zOTE2IDUuMzMyNzYgMTcuODA1OEM1LjMzMjc2IDIzLjgzNzYgOS45MjIzOSAyNy42ODk5IDE1LjcxODkgMjcuNjg5OUMyNi43MzMyIDI3LjY4OTkgMzAuMDA1MSAxOC44NzE0IDM0LjkzNTQgMTguODcxNEMzNC45NiAxOC44NzE0IDM0Ljk4ODggMTguODcxNCAzNS4wMTM0IDE4Ljg3MTRMMzYuOTMwNSAxNi45MzMyQzM0LjU1MzYgMTUuMDE1MSAzMS4wMTkgMTMuODEyNyAyNi43MzczIDEzLjgxMjdDMTguMDE3OSAxMy44MTI3IDEzLjM3MDggMjAuOTQ2MyA5LjQxMzM0IDIwLjk0NjNDNy42ODkxNSAyMC45NDYzIDYuMzcxMzggMTkuMDkyNiA2LjM3MTM4IDE3LjI5NTFDNi4zNzEzOCAxNy4xMTAxIDYuMzgzNyAxNi45MjkyIDYuNDA0MjIgMTYuNzUyMkw1LjQ1MTgxIDE2LjU5NTRMNS40NDc3MSAxNi41OTk0WiIgZmlsbD0idXJsKCNwYWludDRfbGluZWFyXzEyM185MDQxKSIvPgo8cGF0aCBkPSJNMTIuMjc4NiA3Ljc0ODgyQzE4LjY0NTggNy43NDg4MiAyMy4wNjMgMTIuNDY1NyAyOC43NDQ2IDEyLjQ2NTdDMzUuNTU1MSAxMi40NjU3IDM5LjMyNzggOS4yMTY1NiA0MC4yNzYxIDIuODYzMDhMMzkuMjQ1NyAyLjY5NDE5QzM4Ljk1ODMgNC4zNzUwNSAzNy44Mzc2IDYuMzk3NzEgMzUuODMwMiA2LjM5NzcxQzMzLjkzNzcgNi4zOTc3MSAzMS45MzAyIDQuNzY5MTIgMjkuMDA3MyAzLjE5Njg0QzI2LjA3MjEgMS41NzIyOCAyMi43MTgyIDAgMTguNTI2NyAwQzExLjc5NDIgMCA2LjEwODQ4IDMuODg4NDkgMi44Nzc2OSA5LjMwMUw0LjM3NjA5IDEwLjkxNzVDNi4zMDk2NCA4Ljk1NTE4IDkuMDA2NzYgNy43NDg4MiAxMi4yNzg2IDcuNzQ4ODJaIiBmaWxsPSJ1cmwoI3BhaW50NV9saW5lYXJfMTIzXzkwNDEpIi8+CjxwYXRoIGQ9Ik0xOC45MzMyIDMxLjIyODZDMTQuMDAyOSAzMS4yMjg2IDcuNzY3MDggMzAuMTgzMSA0LjEwOTM0IDI2Ljc5MzJMMS45OTkyNyAyOS42MjgxQzUuMDM3MTIgMzYuNDc2MiAxMS41MTkyIDQxLjAwMDEgMjEuMjI4MSA0MS4wMDAxQzI3LjY0ODYgNDEuMDAwMSAzNC43NTA2IDM4LjUxMDkgMzguMTg2NyAzMi4yOTQyTDM1LjQ5NzcgMjguNjYzMUMzMi4zMzI2IDMwLjI5NTcgMjcuMDA4MiAzMS4yMjQ2IDE4LjkzNzMgMzEuMjI0NkwxOC45MzMyIDMxLjIyODZaIiBmaWxsPSJ1cmwoI3BhaW50Nl9saW5lYXJfMTIzXzkwNDEpIi8+CjxwYXRoIGQ9Ik01Ny4xOTM4IDMwLjY3NzZDNTAuODE4NCAzMC42Nzc2IDQ3LjI5NjEgMjYuNTcyIDQ3LjI5NjEgMjAuNUM0Ny4yOTYxIDE0LjQyOCA1MS4xMDk5IDEwLjI1ODEgNTcuMzEyOCAxMC4yNTgxQzU5Ljc4ODMgMTAuMjU4MSA2MS44NTMyIDEwLjgyOTEgNjMuNDU4MyAxMS43MTM3TDYyLjc4OTIgMTUuOTY0MUM2MS4yNzQ0IDE1LjAyMzIgNTkuNDk2OCAxNC4yODczIDU3LjQyNzggMTQuMjg3M0M1My45NjMgMTQuMjg3MyA1Mi4yNzk5IDE2Ljc5MjUgNTIuMjc5OSAyMC40NzE5QzUyLjI3OTkgMjQuMTUxMyA1NC4wMjQ2IDI2Ljc3NzEgNTcuNDg5NCAyNi43NzcxQzU4LjU5NzggMjYuNzc3MSA1OS4zODYgMjYuNTc2IDYwLjE5ODggMjYuMTQ5OFYyMi42NDMzSDU2LjcwNTNMNTYuMTIyMyAxOS4wMjAySDY0LjUzOFYyOC42MDI3QzYyLjQ0MDMgMjkuOTQ1OCA1OS45Njg5IDMwLjY4NTcgNTcuMjAyIDMwLjY4NTciIGZpbGw9IiMwMDY5QjQiLz4KPHBhdGggZD0iTTc0LjA4MjYgMzAuNTM2OEM3MS4zNzMyIDMwLjUzNjggNjkuMTAzIDI5Ljk2OTggNjcuMDYyNyAyOS4wNTdMNjcuNzg5NCAyNC44OTFDNjkuODU0MyAyNS45NzY4IDcyLjE1NzMgMjYuNzE2NyA3NC4xNjg5IDI2LjcxNjdDNzUuNTkzNCAyNi43MTY3IDc2LjU4NjggMjYuMTE3NSA3Ni41ODY4IDI0Ljk0NzNDNzYuNTg2OCAyMy43NzcyIDc2LjAwMzkgMjMuMzE4NyA3My4xNzk1IDIyLjI2NTJDNjkuMTY0NiAyMC43NTMyIDY3LjQxNTggMTkuNDcwNSA2Ny40MTU4IDE2LjIxNzNDNjcuNDE1OCAxMi40MjU0IDcwLjQ0MTMgMTAuMzk4NyA3NC4yODM4IDEwLjM5ODdDNzYuOTExMSAxMC4zOTg3IDc4LjU5ODQgMTAuODg1MiA4MC4zNDMxIDExLjcwOTZMNzkuNTg3NyAxNS44MTUyQzc3Ljc4NTUgMTQuNzg1OCA3NS44ODg5IDE0LjIxODggNzQuMzQ1NCAxNC4yMTg4QzcyLjgwMTggMTQuMjE4OCA3Mi4xMDM5IDE0Ljg0NjEgNzIuMTAzOSAxNS43NTg5QzcyLjEwMzkgMTYuNzU2MiA3Mi42NTgxIDE3LjI0MjcgNzUuMTYyMyAxOC4xODM3Qzc5LjUzNDQgMTkuNzUyIDgxLjI3OTEgMjEuMjMxOCA4MS4yNzkxIDI0LjM3MjNDODEuMjc5MSAyOC42NTA4IDc4LjA3NyAzMC41MzI4IDc0LjA4NjggMzAuNTMyOCIgZmlsbD0iIzAwNjlCNCIvPgo8cGF0aCBkPSJNMTA3Ljc5NCAyMC43NDE0TDEwOC43NDcgMjIuNDE4MkMxMTEuNjA4IDIxLjkyNzYgMTE0LjM1OSAyMC4yOTUgMTE2LjA5MSAxNy43NDU2QzExNy44MjggMjAuMjk1IDEyMC41NzggMjEuOTI3NiAxMjMuNDM5IDIyLjQxODJMMTI0LjM5MiAyMC43NDE0QzEyMC41NTggMjAuMDYxOCAxMTcuMjIgMTcuNTU2NiAxMTcuMjIgMTMuMzE0MlYxMi43NTkzSDEyMy4zN1YxMC44NDUySDEwOC44MTdWMTIuNzU5M0gxMTQuOTY2VjEzLjMxNDJDMTE0Ljk2NiAxNy41NTY2IDExMS42MjkgMjAuMDYxOCAxMDcuNzk0IDIwLjc0MTRaIiBmaWxsPSIjODc4Nzg3Ii8+CjxwYXRoIGQ9Ik0xMjQuOTc5IDI2LjM0MjhIMTA3LjIwOFYyOC4yNTY5SDEyNC45NzlWMjYuMzQyOFoiIGZpbGw9IiM4Nzg3ODciLz4KPHBhdGggZD0iTTEwMy42OTcgMTAuNzYwN0gxMDEuNTQyVjMwLjA5ODZIMTAzLjY5N1YxMC43NjA3WiIgZmlsbD0iIzg3ODc4NyIvPgo8cGF0aCBkPSJNOTcuMjM5OSAxNy4zNjc0SDkwLjYwNTlWMTAuNzU2Nkg4OC40NTA3VjI0LjYzNzdDODguNDUwNyAyNS4xOTI2IDg4LjkzOTIgMjUuNjc5MiA4OS41MjYyIDI1LjY3OTJIOTkuMzk1MlYxMC43NjA2SDk3LjIzOTlWMTcuMzcxNFYxNy4zNjc0Wk05Ny4yMzk5IDIzLjc3NzJIOTAuNjA1OVYxOS4xNDg4SDk3LjIzOTlWMjMuNzc3MloiIGZpbGw9IiM4Nzg3ODciLz4KPHBhdGggZD0iTTE0NSAxOS40MjYzSDEyNy4yMjlWMjEuMzQwNEgxNDVWMTkuNDI2M1oiIGZpbGw9IiM4Nzg3ODciLz4KPHBhdGggZD0iTTEzMS4zNzUgMjcuMDM4NUgxNDMuMDIxVjIyLjM0MThIMTI5LjEwMVYyNC4xOTE1SDE0MC44NVYyNS4zMDE0SDEyOS4yMDdWMjkuMTA5NEMxMjkuMjA3IDI5LjY4MDUgMTI5LjcwNCAzMC4xNzEgMTMwLjI5MSAzMC4xNzFIMTQzLjEyOFYyOC4zMjEzSDEzMS4zNzVWMjcuMDM4NVoiIGZpbGw9IiM4Nzg3ODciLz4KPHBhdGggZD0iTTE0NC40NDYgMTYuMjY5N0gxNDEuNTI3QzE0MS40NTMgMTUuODQ3NCAxNDEuNDA4IDE1LjQwOTEgMTQxLjQwOCAxNC45NDI3VjEyLjc1NTFIMTQzLjM5MVYxMC44NDExSDEyOC44MzhWMTIuNzU1MUgxMzAuODIxVjE0Ljk0MjdDMTMwLjgyMSAxNS40MDUxIDEzMC43OCAxNS44NDc0IDEzMC43MDIgMTYuMjY5N0gxMjcuNzgzVjE4LjE4MzdIMTQ0LjQ0MlYxNi4yNjk3SDE0NC40NDZaTTEzMy4xODkgMTYuMjY5N0MxMzMuMTE1IDE1Ljg0NzQgMTMzLjA3IDE1LjQwOTEgMTMzLjA3IDE0Ljk0MjdWMTIuNzU1MUgxMzkuMTU0VjE0Ljk0MjdDMTM5LjE1NCAxNS40MDUxIDEzOS4xMTMgMTUuODQ3NCAxMzkuMDM1IDE2LjI2OTdIMTMzLjE4OVoiIGZpbGw9IiM4Nzg3ODciLz4KPC9nPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzEyM185MDQxIiB4MT0iNS4xNDAxMyIgeTE9IjExLjQ3ODgiIHgyPSItMC44MzkzNDkiIHkyPSIxNy41ODQ4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNGQkJBMDAiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQ0FDMDAwIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhcl8xMjNfOTA0MSIgeDE9Ii0xLjE0MDM0IiB5MT0iMjEuODIwNSIgeDI9IjMuOTg1MTciIHkyPSIyNy4wNTMxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNDQUMwMDAiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjODZCQzI1Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQyX2xpbmVhcl8xMjNfOTA0MSIgeDE9IjM1Ljk5OTUiIHkxPSIxOC4wMDM2IiB4Mj0iNDAuMzU4MSIgeTI9IjIyLjQ1MzMiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzgzRDBGNSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMEIzQzQiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDNfbGluZWFyXzEyM185MDQxIiB4MT0iNDEuMzQ1NyIgeTE9IjI1LjQzMTUiIHgyPSIzNi45Mzk3IiB5Mj0iMjkuOTI3OSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMDBCM0M0Ii8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAwOUE5MyIvPgo8L2xpbmVhckdyYWRpZW50Pgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50NF9saW5lYXJfMTIzXzkwNDEiIHgxPSI3LjcwOTUxIiB5MT0iMjAuNzU1NiIgeDI9IjM1LjA2ODQiIHkyPSIyMC43NTU2IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiMwMDY5QjQiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjODNEMEY1Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ1X2xpbmVhcl8xMjNfOTA0MSIgeDE9IjMuMDQ2NTciIHkxPSI2LjI1MTMzIiB4Mj0iNDAuNDAxOCIgeTI9IjYuMjUxMzMiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0ZCQkEwMCIvPgo8c3RvcCBvZmZzZXQ9IjAuNjQiIHN0b3AtY29sb3I9IiNFRjdBMDgiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRUE1QjBDIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ2X2xpbmVhcl8xMjNfOTA0MSIgeDE9IjQuMjY5NjkiIHkxPSIzMy44ODYyIiB4Mj0iMzUuNjIyMSIgeTI9IjMzLjg4NjIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzg2QkMyNSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMDlBOTMiLz4KPC9saW5lYXJHcmFkaWVudD4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xMjNfOTA0MSI+CjxyZWN0IHdpZHRoPSIxNDUiIGhlaWdodD0iNDEiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==" alt=""></h1>

        <div class="header__breadcrumbs">
        </div>
    </header>

    <div id="batchHistoryModal" class="modal is-xlarge">
        <div class="modal__inner">
            <div class="modal__header">
                <div class="top">
                    <h2 class="title">배치 실행 결과</h2>
                    <button type="button" class="btn has-icon" data-function="modalClose"><i class="icon is-30 is-close-30"></i><span class="visually-hidden">닫기</span></button>
                </div>
            </div>
            <div class="modal__contents">
                <div class="mt-10">
                    <div class="tui-grid-container-wrap">
                        <div id="batchHistoryGrid" class="grid" style="width: 100%;"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal__mask" data-function="modalClose"></div>
    </div>
    <!-- 모달 구조 -->
    <div id="batchModal" class="modal is-xlarge">
        <div class="modal__inner">
            <div class="modal__header is-noneBorder pb-0">
                <div class="top">
                    <h2 class="title">배치 스케줄 등록</h2>
                    <button type="button" class="btn has-icon" data-function="modalClose"><i class="icon is-30 is-close-30"></i><span class="visually-hidden">닫기</span></button>
                </div>
            </div>
            <form id="batchForm">
                <div class="modal__contents">
                    <div class="inner">
                        <div >
                            <table class="formTable" data-function="toggleTable">
                                <colgroup>
                                    <col style="width: 14rem;">
                                    <col style="width: auto;">
                                </colgroup>
                                <tbody>
                                <tr>
                                    <td><label for="scheduleName">배치스케줄명:</label></td>
                                    <td><input type="hidden" id="scheduleId" name="scheduleId" ><input type="text" id="scheduleName" name="scheduleName" class="form__textarea" placeholder="배치스케줄명" required /></td>
                                </tr>
                                <tr>
                                    <td><label for="batchNm">배치 프로그램</label></td>
                                    <td>  <select id="batchSelect" style="width: 30rem;">
                                        <option value="" disabled selected>배치를 선택하세요</option>
                                    </select><input type="hidden" id="pgmCd" name="pgmCd" >
                                        <input type="hidden" id="batchId" name="batchId">
                                    </td>
                                </tr>
                                <tr>
                                    <td><label for="batchNm">배치 명:</label></td>
                                    <td><input type="text" id="batchNm" name="batchNm" class="form__textarea" placeholder="batchNm" required readonly/></td>
                                </tr>
                                <tr>
                                    <td><label for="classNm">배치 클래스명:</label></td>
                                    <td><input type="text" id="classNm" name="classNm" class="form__textarea" placeholder="classNm" required readonly/></td>
                                </tr>
                                <tr>
                                    <td><label for="methodNm">배치 메소드 명:</label></td>
                                    <td><input type="text" id="methodNm" name="methodNm" class="form__textarea" placeholder="methodNm" required readonly/></td>
                                </tr>
                                <tr>
                                    <td><label for="scheduleSs">스케줄 </label></td>
                                    <td><table class="formTable" data-function="toggleTable">
                                        <colgroup>
                                            <col style="width: 14rem;">
                                            <col style="width: 14rem;">
                                            <col style="width: 14rem;">
                                            <col style="width: 14rem;">
                                            <col style="width: 14rem;">
                                            <col style="width: 14rem;">
                                        </colgroup>
                                        <tbody>
                                        <tr>
                                            <td><label for="scheduleMm">초</label></td>
                                            <td><label for="scheduleMm">분</label></td>
                                            <td><label for="scheduleMm">시</label></td>
                                            <td><label for="scheduleMm">일</label></td>
                                            <td><label for="scheduleMm">월</label></td>
                                            <td><label for="scheduleMm">요일</label></td>
                                        </tr>
                                        <tr>
                                            <td><input type="text" id="scheduleSs" name="scheduleSs" class="form__textarea" placeholder="초" readonly required /></td>
                                            <td><input type="text" id="scheduleMm" name="scheduleMm" class="form__textarea" placeholder="분" required /></td>
                                            <td><input type="text" id="scheduleHh" name="scheduleHh" class="form__textarea" placeholder="시" required /></td>
                                            <td><input type="text" id="scheduleDay" name="scheduleDay" class="form__textarea" placeholder="일" required /></td>
                                            <td><input type="text" id="scheduleMonth" name="scheduleMonth" class="form__textarea" placeholder="월" required /></td>
                                            <td><input type="text" id="scheduleDayweek" name="scheduleDayweek" class="form__textarea" placeholder="요일" required /></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </tr>
                                </tbody>
                            </table>

                        </div>

                        <div class="modal__footer">
                            <div class="btnGroup gap-10">
                                <button type="submit" class="btn is-primary is-large">저장하기</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="container is-admin">
        <div class="sidebarWrap">
            <div class="sidebar">
                <div class="sidebar__profile">
                    <div class="userThumb is-xlarge">
                        <div class="userThumb__img"><img src="/assets/images/profile-img.jpg" alt=""></div>
                    </div>
                </div>

                <nav>
                    <ul class="sidebar__menu">
                        <li>
                            <a href="javascript:void(0);" class="sidebar__menuItem is-active">
                                <i class="icon is-36 is-side-people"></i>
                                <span>스케줄 관리</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
        <main class="admin">
            <div class="subSidebar">
                <div class="subSidebar__title">
                    <i class="icon is-24 is-title-admin"></i>
                    <h2 class="title">스케줄 관리</h2>
                </div>

                <nav>
                    <ul class="pageMenu">
                        <li>
                            <a href="BO_PC_01_0101.html" class="pageMenu__item">스케줄링 관리</a>
                            <ul class="pageMenu is-twoDepth">
                                <li><a href="BO_PC_01_0203.html" class="pageMenu__item is-active">스케줄링 관리</a></li>
                            </ul>
                        </li>
                    </ul>
                </nav>
            </div>

            <div class="contents">
                <div class="contents__title">
                    <h3 class="title">스케줄 목록</h3>

                    <!-- 모달 열기 버튼 -->
                    <button id="openModalBtn" class="btn is-primary is-small">배치 스케줄 등록</button>
                </div>

                <div class="contents__inner dashboard">
                    <div class="tui-grid-container-wrap">
                        <div id="grid" class="grid" style="width: 100%;"></div>
                    </div>
                </div>
            </div>

            <script>

                const baseUrl = '[[${baseUrl}]]'; // Thymeleaf 표현식으로 변수에 할당 "https://demo-awp.alice-ailab.com/SCH";
                let mainGrid = null;
                let batchHistoryGrid = null;
                let _enableBatchPgmList = null;
                let _batchResultList = null;

                const batchSelect = document.getElementById('batchSelect');
                const batchIdInput = document.getElementById('batchId');
                const pgmCdInput = document.getElementById('pgmCd');
                const batchNmInput = document.getElementById('batchNm');
                const methodNmInput = document.getElementById('methodNm');
                const classNmInput = document.getElementById('classNm');

                function getEnableBatchList() {
                    try {
                        const response = fetch(`${baseUrl}/api/scheduler/get/enableBatchList`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: null,
                        })
                        .then(response => response.json())
                        .then(response => {
                            if (response.code == 0) {
                                _enableBatchPgmList = response.data;
                                _enableBatchPgmList.forEach(item => {
                                    const option = document.createElement('option');
                                    option.value = item.batchId;
                                    option.textContent = item.batchNm;
                                    option.dataset.pgmCd = item.pgmCd;
                                    option.dataset.batchNm = item.batchNm;
                                    option.dataset.methodNm = item.methodNm;
                                    option.dataset.classNm = item.classNm;
                                    batchSelect.appendChild(option);
                                });
                            } else {
                                console.log(response.msg);
                            }
                        });


                    } catch (error) {
                        alert('요청 중 오류 발생: ' + error.message);
                    }
                }

                // 선택 변경 시 숨겨진 입력 필드에 값 설정
                batchSelect.addEventListener('change', function () {
                    const selectedOption = this.options[this.selectedIndex];
                    batchIdInput.value = selectedOption.value;
                    pgmCdInput.value = selectedOption.dataset.pgmCd || '';
                    batchNmInput.value = selectedOption.dataset.batchNm || '';
                    methodNmInput.value = selectedOption.dataset.methodNm || '';
                    classNmInput.value = selectedOption.dataset.classNm || '';
                });

                function batchExecute(pgmCd, batchId, scheduleId, classNm, methodNm) {
                    try {
                        const response = fetch(`${baseUrl}/api/scheduler/execute/scheduleTask`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                pgmCd: pgmCd,
                                classNm: classNm,
                                methodNm: methodNm,
                                batchId: batchId,
                                scheduleId: scheduleId,
                            }),
                        })
                        .then(response => response.json())
                        .then(response => {
                            if (response.code == 0) {
                                alert("배치 작업을 실행하였습니다.");
                            } else {
                                console.log(response.msg);
                                alert("배치 작업을 실행에 실패하였습니다.");
                            }
                        });
                    } catch (error) {
                        alert('요청 중 오류 발생: ' + error.message);
                    }
                }


                function showBatchHistory(pgmCd, batchId, scheduleId) {
                    console.log(pgmCd + batchId + scheduleId);
                    _batchResultList = [];

                    if ( batchHistoryGrid == null ) {

                        // 배치 실행 결과 grid
                        batchHistoryGrid = new Grid({
                            el: document.getElementById("batchHistoryGrid"),
                            minBodyHeight: 600,
                            pageOptions: { useClient: true, perPage: 12 },
                            contextMenu: null,
                            data: _batchResultList,
                            scrollX: false,
                            scrollY: false,
                            rowHeaders: [
                                { header: 'NO', type: 'rowNum', width: 60 }
                            ],
                            header: {height: 42},
                            minRowHeight: 48,
                            columns: [
                                { header: "pgmCd", name: "pgmCd", width: 150, sortable: false, align: "center"},
                                { header: "상태", name: "jobExecStatus", width: 70, sortable: false, align: "center" },
                                { header: "서버 정보", name: "jobExecServerInfo", width: 150, sortable: false, align: "center" },
                                { header: "작업 결과", name: "jobExecResult", width: 300, sortable: false, align: "center" },
                                { header: "작업 시작일시", name: "jobStartDt", width: 170, sortable: false, align: "center" },
                                { header: "작업 종료일시", name: "jobEndDt", width: 170, sortable: false, align: "center" },
                            ]
                        });
                    }

                    const target2 = document.querySelector("#batchHistoryModal");
                    try {
                        const response = fetch(`${baseUrl}/api/scheduler/get/batchResultList`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                pgmCd: pgmCd,
                                batchId: batchId,
                                scheduleId: scheduleId,
                            }),
                        })
                        .then(response => response.json())
                        .then(response => {
                            if (response.code == 0) {
                                _batchResultList = response.data;
                                batchHistoryGrid.resetData(_batchResultList);
                                batchHistoryGrid.reloadData();
                            } else {
                                console.log(response.msg);
                            }
                        });
                    } catch (error) {
                        alert('요청 중 오류 발생: ' + error.message);
                    }
                    fadeIn(target2, 100);
                }

                function getScheduleList() {
                    try {
                        const response = fetch(`${baseUrl}/api/scheduler/get/scheduleList`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: null,
                        })
                        .then(response => response.json())
                        .then(response => {
                            if (response.code == 0) {
                                _scheduleList = response.data;
                                mainGrid.resetData(_scheduleList);
                            } else {
                                console.log(response.msg);
                            }
                        });


                    } catch (error) {
                        alert('요청 중 오류 발생: ' + error.message);
                    }
                }

                document.getElementById('openModalBtn').addEventListener('click', function() {
                    document.getElementById("batchForm").reset();
                    const target = document.querySelector("#batchModal");
                    document.getElementById('scheduleSs').value = "0";
                    fadeIn(target, 100);
                });

                window.addEventListener("DOMContentLoaded", function () {
                    var _scheduleList = [];

                    // 스케줄 grid
                    mainGrid = new Grid({
                        el: document.getElementById("grid"),
                        minBodyHeight: 800,
                        pageOptions: { useClient: true, perPage: 15 },
                        contextMenu: null,
                        data: _scheduleList,
                        scrollX: false,
                        scrollY: false,
                        rowHeaders: [
                            { header: 'NO', type: 'rowNum', idth: 60, },
                        ],
                        header: {height: 42},
                        minRowHeight: 48,
                        columns: [
                            { header: "스케줄명", name: "scheduleName", width: 250, sortable: true, align: "center" },
                            { header: "pgmCd", name: "pgmCd", width: 0, },
                            { header: "batchId", name: "batchId", width: 0, },
                            { header: "스케줄 Cron", name: "cloneTab", width: 250, sortable: true, align: "center" },
                            { header: "다음 스케줄 시간", name: "nextExecDt", width: 250, sortable: true, align: "center" },
                            { header: "스케줄 프로그램 (클래스)", name: "classNm", sortable: true },
                            { header: "스케줄 프로그램 (Method)", name: "methodNm", sortable: true },
                            { header: "스케줄 프로그램 명", name: "batchNm", sortable: true },
                            { header: "실행이력", name: "batchHistory", sortable: false, width: 50,
                                renderer: {
                                    type: addButtonRenderer,
                                    options: [
                                        {
                                            btnType: 'is-download',
                                            btnIcon: 'is-24 is-popup-24',
                                            click: (row) => {showBatchHistory(row.pgmCd, row.batchId, row.scheduleId);}
                                        },
                                    ]
                                }
                            },
                            { header: "실행", name: "batchExecute", sortable: false, width: 50,
                                renderer: {
                                    type: addButtonRenderer,
                                    options: [
                                        {
                                            btnType: 'is-download',
                                            btnIcon: 'is-24 is-popup-24',
                                            click: (row) => {batchExecute(row.pgmCd, row.batchId, row.scheduleId,row.classNm, row.methodNm);}
                                        },
                                    ]
                                }
                            }
                        ]
                    });

                    mainGrid.on("dblclick", (ev) => {
                        let pgmCd = mainGrid.getValue(ev.rowKey, "pgmCd");
                        let batchId = mainGrid.getValue(ev.rowKey, "batchId");
                        console.log("id : " + batchId);

                        const target = document.querySelector("#batchModal");

                        batchIdInput.value = batchId;
                        document.getElementById('scheduleId').value = mainGrid.getValue(ev.rowKey, "scheduleId");
                        batchSelect.value = batchId;
                        pgmCdInput.value = pgmCd;
                        batchNmInput.value = mainGrid.getValue(ev.rowKey, "batchNm");
                        methodNmInput.value = mainGrid.getValue(ev.rowKey, "methodNm");
                        classNmInput.value = mainGrid.getValue(ev.rowKey, "classNm");
                        document.getElementById('scheduleName').value = mainGrid.getValue(ev.rowKey, "scheduleName");
                        document.getElementById('scheduleSs').value = mainGrid.getValue(ev.rowKey, "scheduleSs");
                        document.getElementById('scheduleMm').value = mainGrid.getValue(ev.rowKey, "scheduleMm");
                        document.getElementById('scheduleHh').value = mainGrid.getValue(ev.rowKey, "scheduleHh");
                        document.getElementById('scheduleDay').value = mainGrid.getValue(ev.rowKey, "scheduleDay");
                        document.getElementById('scheduleMonth').value = mainGrid.getValue(ev.rowKey, "scheduleMonth");
                        document.getElementById('scheduleDayweek').value = mainGrid.getValue(ev.rowKey, "scheduleDayweek");

                        // body.classList.add("overflow-hidden");
                        fadeIn(target, 100);
                    });

                    mainGrid.hideColumn('pgmCd');
                    mainGrid.hideColumn('batchId');
                    getScheduleList();
                    getEnableBatchList();
                });
            </script>
            <script type="module">
                import { isValidCron } from 'https://cdn.skypack.dev/cron-validator';

                // 모달 요소 가져오기
                const modal = document.getElementById('batchModal');

                       // 폼 제출 처리
                document.getElementById('batchForm').addEventListener('submit', async function (e) {
                  e.preventDefault(); // 기본 폼 제출 방지

                  const form = e.target;
                  const formData = new FormData(form);
                  const data = Object.fromEntries(formData.entries());

                  // 크론 표현식 조합
                  const cronExpr = `${data.scheduleSs} ${data.scheduleMm} ${data.scheduleHh} ${data.scheduleDay} ${data.scheduleMonth} ${data.scheduleDayweek}`;

                  // 크론 표현식 유효성 검사
                  if (!isValidCron(cronExpr, { seconds: true })) {
                    alert('유효하지 않은 크론 표현식입니다. 입력값을 확인해주세요.');
                    return;
                  }

                  try {
                    const response = await fetch(`${baseUrl}/api/scheduler/save/scheduleTask`, {
                      method: 'POST',
                      headers: {
                        'Content-Type': 'application/json'
                      },
                      body: JSON.stringify(data)
                    });

                    if (response.ok) {
                      alert('배치 스케줄이 성공적으로 저장되었습니다.');
                      form.reset();
                      getScheduleList();
                      modal.style.display = 'none';

                    } else {
                      const errorData = await response.json();
                      alert('저장 실패: ' + (errorData.message || '알 수 없는 오류'));
                    }
                  } catch (error) {
                    alert('요청 중 오류 발생: ' + error.message);
                  }
                });
            </script>
        </main>
    </div>
</div>
</body>
</html>